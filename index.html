<!DOCTYPE html>
<html>
<head>
  <title>Status Board</title>
  <style>
    body { font-family: sans-serif; }
    .status-online { color: green; }
    .status-busy { color: orange; }
    .status-offline { color: gray; }
  </style>
</head>
<body>
  <h1>Status Board</h1>
  <form id="statusForm">
    <input name="name" placeholder="Name" required />
    <select name="status">
      <option value="online">Online</option>
      <option value="busy">Busy</option>
      <option value="offline">Offline</option>
    </select>
    <button type="submit">Update</button>
  </form>

  <div id="statusList"></div>

  <script>
    async function loadStatus() {
      const res = await fetch("/api/status");
      const users = await res.json();
      const list = document.getElementById("statusList");
      list.innerHTML = '';
      users.forEach(user => {
        list.innerHTML += `<p><strong>${user.name}</strong>: <span class="status-${user.status}">${user.status}</span></p>`;
      });
    }

    document.getElementById("statusForm").addEventListener("submit", async e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      await fetch("/api/update", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: formData.get("name"),
          status: formData.get("status")
        })
      });
      loadStatus();
    });

    loadStatus();
  </script>
</body>
</html>
